function formplate(e){var t=function(e){var t={body:e.getElementsByTagName("body")[0],html:e.getElementsByTagName("html")[0]},o=function(e,t){if(u(e))if("object"==typeof t)for(var o=0,n=t.length;n>o;o++)l(e,t[o]);else if(i(t))for(var a=t.split(" "),o=0,n=a.length;n>o;o++)l(e,a[o]);else l(e,t)},l=function(e,t){var o=e.className;null===o.match(new RegExp("\\b"+t+"\\b","g"))&&(e.className=""===o?t:o+" "+t)},n=function(e){u(e)&&e.removeAttribute("class")},a=function(e,t){if(u(e))if("object"==typeof t)for(var o=t.length-1;o>=0;o--)s(e,t[o]);else if(i(t))for(var l=t.split(" "),o=0,n=l.length;n>o;o++)s(e,l[o]);else s(e,t)},s=function(e,t){e.className.indexOf(t)>-1&&(e.className=e.className.split(" ").filter(function(e){return e!=t}).toString().replace(/,/g," "),""===e.className&&n(e))},c=function(e){switch(typeof e){case"object":if(e instanceof Array)return JSON.parse(JSON.stringify(e));break;default:return!1}},r=function(e,t,o){null!=e&&"undefined"!=typeof e&&(e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o)},u=function(e){return null!==e&&void 0!==typeof e},d=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},i=function(e){return/\s/.test(e)},p=function(){return"ontouchstart"in window||"onmsgesturechange"in window};return{classAdd:o,classClear:n,classRemove:a,clone:c,element:t,eventAdd:r,hasClass:d,isTouch:p}}(document),o=this;o.options={selector:e&&e.selector?e.selector:$formplateDefault.selector,colour:e&&e.colour?e.colour:$formplateDefault.colour,style:e&&e.style?e.style:$formplateDefault.style,label:e&&e.label?e.label:$formplateDefault.label};var l=document.querySelectorAll(o.options.selector);t.clone(document.querySelector(o.options.selector));t.isTouch()||t.hasClass(t.element.html,"fp-no-touch")||t.classAdd(t.element.html,"fp-no-touch");for(var n=function(e){e.onclick=function(){t.hasClass(e.parentNode,"_checked")?(e.checked=!1,t.classRemove(e.parentNode,"_checked")):(e.checked=!0,t.classAdd(e.parentNode,"_checked"))}},a=function(e){for(var o=e.querySelectorAll("input"),l=0,n=o.length;n>l;l++){var a=o[l];a.onfocus=function(){var e=a.parentNode.getAttribute("class").indexOf("fp-")>-1?a.parentNode:a.parentNode.parentNode.getAttribute("class").indexOf("fp-")>-1?a.parentNode.parentNode:a.parentNode.parentNode.parentNode;t.classAdd(e,"_focused _valued")},a.onblur=function(){var e=a.parentNode.getAttribute("class").indexOf("fp-")>-1?a.parentNode:a.parentNode.parentNode.getAttribute("class").indexOf("fp-")>-1?a.parentNode.parentNode:a.parentNode.parentNode.parentNode;t.classRemove(e,"_focused"),a.value.length<1&&t.classRemove(e,"_valued")}}},s=function(e){e.onclick=function(){for(var o=document.getElementsByName(e.getAttribute("name")),l=0,n=o.length;n>l;l++)o[l].checked=!1,t.classRemove(o[l].parentNode,"_checked");e.checked=!0,t.classAdd(e.parentNode,"_checked")}},c=function(e){e.onfocus=function(){t.classAdd(e.parentNode,"_focused _valued")},e.onblur=function(){t.classRemove(e.parentNode,"_focused"),e.value.length<1&&t.classRemove(e.parentNode,"_valued")}},r=["_c-"+o.options.colour,"_s-"+o.options.style],u=0,d=l.length;d>u;u++){var i=l[u],p=t.clone(r);if(i.querySelector("input")){var f=i.querySelector("input"),h=f.getAttribute("type");"checkbox"===h||"radio"===h?(f.checked===!0?p.push("_checked"):t.hasClass(i,"_checked")&&t.classRemove(i,"_checked"),t.hasClass(f,"toggler")?p.push("fp-tog"):(p.push("fp-check"),"radio"===h&&p.push("_t-radio")),t.classAdd(i,p),"checkbox"===h?n(f):"radio"===h&&s(f)):"password"===h?(o.options.label.length>0&&"normal"!==o.options.label&&p.push("_l-"+o.options.label),p.push("fp-inp","_t-password"),f.value.length>0&&p.push("_valued"),t.classAdd(i,p),a(i)):(p.push("fp-inp"),o.options.label.length>0&&"normal"!==o.options.label&&p.push("_l-"+o.options.label),f.value.length>0&&p.push("_valued"),t.classAdd(i,p),a(i))}else if(i.querySelector("textarea")){var m=i.querySelector("textarea");o.options.label.length>0&&"normal"!==o.options.label&&p.push("_l-"+o.options.label),p.push("fp-text"),m.value.length>0&&p.push("_valued"),t.classAdd(i,p),c(m)}else if(i.querySelector("select")){var v=i.querySelector("select");null!=v&&(p.push("fp-sel"),t.classAdd(i,p))}}}var $formplateDefault={selector:".formplate",colour:"blue",style:"line",label:"normal"};